//`include "test.txt" 
module tb;
int fd ; // It is a file descriptor which acts as a pointer
int status ;
bit normal_mode,debug_mode;
int core;
int time_a;
int oop;
bit [35:0] addr;


initial 

	begin
	$display("**********************CHECKPOINT 1 ***********************");
	if (!(($value$plusargs("normal_mode=%d ",normal_mode))|($value$plusargs("debug_mode=%d",debug_mode))))
	begin
		normal_mode=0;
		debug_mode=0;
	end
	if (normal_mode==1) $display ("User has forced to run in normal_mode");
	else $display ("User has forced to run in debug_mode");
	
	

	open_file_do_operations();

	end
	
task open_file_do_operations;
	fd = $fopen("test.txt","r");							     	//open the file and assigning it tonfile driscripter
	if (fd) $display("File opening was successfull ");
	else $display("File opening was not successfull ");
	while (!$feof(fd)) 											// feof to read the data till end of the file
	begin
		status = $fscanf(fd , "%d %d %d %h",time_a,core,oop,addr);            // read the data in line and split it according to the spaces
	 operations (time_a,core,oop,addr);
	end
	$fclose(fd);
endtask



task operations (input int t,c,o, input bit[35:0] a);
	case(c)
	0: $display("request from core zero at time %0d for address %0s ",t,a);
	1: $display("request from core one at time %0d for address %0h ",t,a);
	2: $display("request from core two at time %0d for address %0h ",t,a);
	3: $display("request from core three at time %0d for address %0h ",t,a);
	4: $display("request from core four at time %0d for address %0h ",t,a);
	5: $display("request from core five at time %0d for address %0h ",t,a);
	6: $display("request from core six at time %0d for address %0h ",t,a);
	7: $display("request from core seven at time %0d for address %0h ",t,a);
	8: $display("request from core eight at time %0d for address %0h ",t,a);
	9: $display("request from core nine at time %0d for address %0h ",t,a);
	10: $display("request from core ten at time %0d for address %0h ",t,a);
	11: $display("request from core eleven at time %0d for address %0h ",t,a);
	12: $display("request from core twelve at time %0d for address %0h ",t,a);
	default: $display("No request from the cores");
	endcase	
endtask


endmodule
